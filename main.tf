module "mssql_single_server" {
  source = "./Terraform/module/mssql_single_server"

  subscription_id                       = var.subscription_id
  create_resource_group                 = var.create_resource_group
  resource_group_name                   = var.resource_group_name
  location                              = var.location
  create_network_watcher_resource_group = var.create_network_watcher_resource_group
  network_watcher_resource_group        = var.network_watcher_resource_group
  network_watcher_name                  = var.network_watcher_name
  create_virtual_network                = var.create_virtual_network
  virtual_network_name                  = var.virtual_network_name
  address_space                         = var.address_space
  existing_vnet_id                      = var.existing_vnet_id
  create_subnet                         = var.create_subnet
  subnet_name                           = var.subnet_name
  existing_subnet_id                    = var.existing_subnet_id
  subnet_address_prefix                 = var.subnet_address_prefix
  service_endpoints                     = var.service_endpoints
  #service_endpoint_policy_ids = var.service_endpoint_policy_ids
  delegation                                            = var.delegation
  network_security_group_name                           = var.network_security_group_name
  security_rule                                         = var.security_rule
  enable_private_endpoint                               = var.enable_private_endpoint
  mssql_private_endpoint_name                           = var.mssql_private_endpoint_name
  deploy_log_analytics_workspace                        = var.deploy_log_analytics_workspace
  log_analytics_ws_name                                 = var.log_analytics_ws_name
  deploy_key_vault                                      = var.deploy_key_vault
  keyvault_name                                         = var.keyvault_name
  enable_mssql_server_extended_auditing_policy          = var.enable_mssql_server_extended_auditing_policy
  enable_mssql_server_microsoft_support_auditing_policy = var.enable_mssql_server_microsoft_support_auditing_policy
  enable_mssql_server_security_auditing_policy          = var.enable_mssql_server_security_auditing_policy
  enable_database_extended_auditing_policy              = var.enable_database_extended_auditing_policy
  enable_vulnerability_assessment                       = var.enable_vulnerability_assessment
  enable_log_monitoring                                 = var.enable_log_monitoring
  storage_account_name                                  = var.storage_account_name
  storage_account_kind                                  = var.storage_account_kind
  storage_account_tier                                  = var.storage_account_tier
  storage_account_replication_type                      = var.storage_account_replication_type
  enable_https_traffic_only                             = var.enable_https_traffic_only
  min_tls_version                                       = var.min_tls_version
  storage_container_name                                = var.storage_container_name
  container_access_type                                 = var.container_access_type
  mssql_server_name                                     = var.mssql_server_name
  mssql_server_version                                  = var.mssql_server_version
  administrator_login                                   = var.administrator_login
  mssql_server_minimum_tls_version                      = var.mssql_server_minimum_tls_version
  public_network_access_enabled                         = var.public_network_access_enabled
  mssql_server_connection_policy                        = var.mssql_server_connection_policy
  outbound_network_restriction_enabled                  = var.outbound_network_restriction_enabled
  identity                                              = var.identity
  retention_in_days                                     = var.retention_in_days
  storage_account_access_key_is_secondary               = var.storage_account_access_key_is_secondary
  enable_threat_detection_policy                        = var.enable_threat_detection_policy
  policy_state                                          = var.policy_state
  disabled_alerts                                       = var.disabled_alerts
  email_account_admins                                  = var.email_account_admins
  email_addresses                                       = var.email_addresses
  retention_days                                        = var.retention_days
  auto_rotation_enabled                                 = var.auto_rotation_enabled
  enable_server_vulnerability_assessment                = var.enable_server_vulnerability_assessment
  enable_email_subscription_admins                      = var.enable_email_subscription_admins
  emails                                                = var.emails
  mssql_server_dns_alias                                = var.mssql_server_dns_alias
  sql_database_name                                     = var.sql_database_name
  sku_name                                              = var.sku_name
  collation                                             = var.collation
  maintenance_configuration_name                        = var.maintenance_configuration_name
  license_type                                          = var.license_type
  transparent_data_encryption_enabled                   = var.transparent_data_encryption_enabled
  #zone_redundant = var.zone_redundant
  mandatory_tags            = var.mandatory_tags
  additional_tags           = var.additional_tags
  existing_private_dns_zone = var.existing_private_dns_zone
}
